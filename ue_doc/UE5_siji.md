# UE5

## 死寂

### 1.1 注意事项

- 版本
- 素材
- 预习课程

游戏的核心在于玩法和剧情

### 1.2 角色基础移动和摄像机控制

#### 导入素材

向游戏引擎中导入游戏所需素材，包含场景，动画，人物模型，音效，UI 素材，以备后续使用。

#### 输入映射

实现硬件（键盘、游戏手柄等）与游戏界面的交互映射。

动作映射：（按下）这个映射只会检测设置对应的输入是否有按下/释放。
轴映射：（持续按下）这个映射只会检测设置对应的输入是否一直按下。每帧都检测。

本节需要实现键盘前后左右(awsd)、鼠标上下左右的轴映射。

#### 摄像机旋转

#### 新建角色

- 创建网格体

- 添加弹簧臂和相机。
  - 弹簧臂长度为 170
  - 持有武器时，弹簧臂右移 50，用于在扛枪时看到准星。

#### 角色基础移动

此时运行游戏，可以看到第三方视角下的场景和角色。角色在场景中始终朝向前方运动，可以无动画移动，左右移动鼠标时以角色为轴心旋转相机视角。

### 1.3 蓝图动画和混合空间的使用、行走和奔跑的切换

#### 动画蓝图、状态机介绍

#### 混合空间介绍和使用

#### 实时获取角色速度

#### 角色行走和奔跑切换

添加行走（左 ctrl）和冲刺（左 shift）的操作映射。

设置角色速度在 150-500：

- 角色行走，移动速度为 150，
- 按左 shift 时，角色冲刺，最大行走速度为 500。

添加行走、冲刺动画，并根据角色速度进行混合动画。

此时运行，角色默认行走动画，按 shift 键播放冲刺动画。

### 1.4 角色跳跃功能制作

跳跃实现内容：

- 按空格跳跃，动作映射。
- 跳跃动画（在不同移动状态下起跳时，播放不同的跳跃动画）
- 跳跃高度（在不同移动状态下起跳时，跳跃高度的变化）
- 是否可以二段跳

特殊情况的跳跃：

- 角色蹲伏时跳跃——解除蹲伏，不跳跃
- 角色移动时跳跃——角色跳跃，跳跃高度和动画根据角色移动速度略有不同。
- 角色下坠时跳跃——角色不跳跃
- 角色正在跳跃——按空格键跳跃后，禁止再次触发跳跃事件，1s 后解除禁止跳跃。
- 跳跃进行时，禁止下坠状态，跳跃结束后解除对坠落状态的限制。

死寂跳跃高度值设置参考：

- 慢跑——跳跃高度 360
- 行走——跳跃高度 320
- 冲刺——跳跃高度 400

### 1.5 角色坠落功能制作

人物角色的移动组件应有对以下移动场景的判定，
角色是否正在：

- 蹲伏
- 下坠
- 在地面移动（步行或开车等）
- 飞行
- 游泳

通过调用对上述移动状态的判断，对人物移动状态进行自定义设置。

当角色移动状态为下坠时，

- 播放下坠动画（若角色正在持枪，则将持枪动画的上半身与下坠状态混合）
- 禁止跳跃，蹲伏。

### 1.6 摩擦力修改、动作替换

### 1.7 角色蹲伏(crouch)功能制作

当角色移动状态为蹲伏时，

- 按 C 键蹲伏，动作映射，再按可取消蹲伏。
- 播放蹲伏动画
  - 若角色正在持枪，蹲伏动画混合持枪动画
- 降低摄像机高度（Z-40）
- 降低最大移动速度

死寂蹲伏值参考：

- 蹲伏时高度 55cm
- 最大蹲伏行走速度 135cm/s

### 1.8 角色瞄准偏移功能制作

### 1.9 第一周补充整理
